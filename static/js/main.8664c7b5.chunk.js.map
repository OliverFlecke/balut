{"version":3,"sources":["styles/colors.ts","styles/elements.tsx","Category.ts","styles/table.ts","utils/enums.ts","components/Game/state/gameUtils.ts","components/Board/FinalScore.tsx","components/Board/FooterRow.tsx","components/Board/HeaderRow.tsx","components/Board/Cell.tsx","components/Board/rules.ts","components/Board/Row.tsx","components/Board/Board.tsx","components/Board/BoardControls.tsx","components/Game/Dice.tsx","components/Game/state/GameState.ts","components/Game/state/actions/ClearBoard.ts","components/Game/state/actions/ResetRollAction.ts","components/Game/state/actions/RollAction.ts","components/Game/state/actions/StoreValue.ts","components/Game/state/actions/ToggleDiceAction.ts","components/Game/Game.tsx","state/AppActions.ts","components/MultiplayerGame.tsx","components/Navigation.tsx","components/Rules.tsx","components/Modal.tsx","components/StartMultiplayerModal.tsx","connection.ts","state/AppState.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["darkColors","borderColor","theme","dark","navColor","Category","backgroundColor","variants","disabled","primary","color","Button","styled","button","Ul","ul","Li","li","categoryToString","category","FullHouse","Table","table","Tr","tr","Th","th","Td","td","enumValues","e","Object","keys","filter","key","map","x","parseInt","doRoll","locked","current","Array","v","i","Math","floor","random","resetLocked","sumNumbers","roll","reduce","acc","FinalScore","points","Wrapper","ScoreContainer","div","FooterRow","total","extraPoints","colSpan","HeaderRow","Cell","value","index","suggestion","writeValue","onClick","useCallback","TdCell","variant","undefined","toString","valueToString","default","categoryPoints","values","Balut","length","Chance","sumValues","Straight","Sixes","Fives","Fours","finalPointScoreThresholds","calculateSuggestion","some","every","includes","isStraight","Set","size","from","count","isFullHouse","Row","title","useMemo","sum","first","findIndex","categories","Board","score","extraPointScore","totalPoints","BoardControls","clearBoard","Dice","dice","toggleLock","diceStyles","gameReducer","state","action","newState","localStorage","setItem","JSON","stringify","React","createContext","initBalutValues","ClearBoard","removeItem","ResetRollAction","rollNumber","RollAction","StoreValue","this","assign","ToggleDiceAction","b","Game","onTurnFinished","useReducer","stored","getItem","parse","initialGameState","dispatch","useState","setRoll","useEffect","executeRoll","interval","setInterval","setTimeout","clearInterval","newRoll","Container","DiceContainer","ButtonContainer","SetConnectionAction","connection","SetSessionAction","session","SetNameAction","name","UpdatePlayerStateAction","console","log","players","player","AddPlayerAction","p","concat","MultiplayerGame","setIndex","onSelect","invoke","on","selectedIndex","Navigation","shouldShowMultiplayer","showMultiplayer","Nav","NavUl","NavLi","to","nav","Rules","description","lower","higher","Modal","children","visible","dismiss","dismissClick","clickCapture","stopPropagation","VerticalCenter","ContentContainer","StartMultiplayerModal","failed","setFailed","nameRef","useRef","sessionRef","url","signalR","withUrl","build","Promise","resolve","reject","start","then","catch","err","error","initConnection","newPlayer","otherPlayer","off","startGame","startGameSubmit","preventDefault","joinGame","joinGameSubmit","H3","Form","onSubmit","Input","ref","placeholder","type","Line","input","form","h3","hr","reducer","initial","App","setCurrentTheme","showMPModal","setShowMPModal","mode","GlobalStyle","Main","Header","H1","path","mainStyles","css","main","createGlobalStyle","header","h1","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.8664c7b5.chunk.js","sourcesContent":["import theme from 'styled-theming';\n\nexport const darkColors = {\n\tborder: '#CCC',\n\tcolor: '#CCC',\n\tbackgroundColor: '#000',\n\tsecondaryBackgroundColor: '#222',\n\tsuggestion: '#09F',\n\tnavColor: '#09C',\n};\n\nexport const borderColor = theme('mode', {\n\tdark: darkColors.border,\n});\n\nexport const navColor = theme('mode', {\n\tdark: darkColors.navColor,\n});\n","import styled from 'styled-components';\nimport theme from 'styled-theming';\nimport { darkColors } from './colors';\n\nconst backgroundColor = theme.variants('mode', 'variant', {\n\tdisabled: { dark: 'darkgray' },\n\tprimary: { dark: 'darkblue' },\n});\nconst color = theme.variants('mode', 'variant', {\n\tdisabled: { dark: darkColors.color },\n\tprimary: { dark: darkColors.color },\n});\n\nexport const Button = styled.button`\n\tbackground-color: ${backgroundColor};\n\tcolor: ${color};\n\tpadding: 10px;\n\tmargin: 6px;\n\tborder: none;\n\tborder-radius: 6px;\n\tfont-size: 1.2em;\n`;\n\nexport const Ul = styled.ul`\n\tdisplay: inline;\n\tlist-style-type: none;\n\tpadding: 0;\n\tmargin: 0;\n`;\n\nexport const Li = styled.li`\n\tdisplay: flex;\n\tjustify-content: space-between;\n`;\n","export enum Category {\n\tFours,\n\tFives,\n\tSixes,\n\tStraight,\n\tFullHouse,\n\tChance,\n\tBalut,\n}\n\nexport function categoryToString(category: Category): string {\n\tif (category === Category.FullHouse) {\n\t\treturn 'Full house';\n\t}\n\treturn Category[category];\n}\n","import styled from 'styled-components';\nimport { borderColor } from './colors';\n\nexport const maxWidth = '760px';\n\nexport const Table = styled.table`\n\tborder-collapse: collapse;\n\twidth: 100%;\n\tmax-width: ${maxWidth};\n`;\n\nexport const Tr = styled.tr``;\nexport const Th = styled.th`\n\ttext-align: left;\n\tborder: 1px solid ${borderColor};\n\tpadding: 4px;\n`;\nexport const Td = styled.td`\n\tborder: 1px solid ${borderColor};\n\tpadding: 4px;\n\ttext-align: center;\n\tmin-width: 20px;\n`;\n","// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function enumStrings(e: any): string[] {\n\treturn Object.keys(e).filter((key) => typeof e[key] === 'number');\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function enumValues(e: any): number[] {\n\treturn Object.keys(e)\n\t\t.filter((key) => typeof e[key] !== 'number')\n\t\t.map((x) => parseInt(x));\n}\n","import { RollLock, Roll } from './GameState';\n\nexport function randomDice(): number {\n\treturn Math.floor(Math.random() * 6) + 1;\n}\n\nexport function doRoll(locked: RollLock, current?: Roll): Roll {\n\treturn (current ?? [...Array(5)]).map((v, i) =>\n\t\tlocked[i] ? v : randomDice(),\n\t) as Roll;\n}\n\nexport function resetLocked(): RollLock {\n\treturn [...Array(5)].map(() => false) as RollLock;\n}\n\nexport function sumNumbers(roll: number[]) {\n\treturn roll.reduce((acc, v) => acc + v, 0);\n}\n","import React from 'react';\nimport { maxWidth } from '../../styles/table';\nimport styled from 'styled-components';\n\ninterface FinalScoreProps {\n\tpoints: number;\n}\n\nexport const FinalScore = ({ points }: FinalScoreProps) => (\n\t<Wrapper>\n\t\t<ScoreContainer>\n\t\t\t<span>Final score: </span>\n\t\t\t<span>{points}</span>\n\t\t</ScoreContainer>\n\t</Wrapper>\n);\n\nconst Wrapper = styled.div`\n\tdisplay: flex;\n\twidth: 100%;\n\tjustify-content: flex-end;\n\tmargin: 6px 0;\n\tmax-width: ${maxWidth};\n`;\n\nconst ScoreContainer = styled.div`\n\tfont-size: 1.4em;\n\tborder-bottom: 1px solid white;\n`;\n","import React from 'react';\nimport { Tr, Td } from '../../styles/table';\n\ninterface FooterRowProps {\n\ttotal: number;\n\textraPoints: number;\n}\n\nexport const FooterRow = ({ total, extraPoints }: FooterRowProps) => (\n\t<tfoot>\n\t\t<Tr>\n\t\t\t<td colSpan={5} />\n\t\t\t<Td>{total}</Td>\n\t\t\t<Td>{extraPoints}</Td>\n\t\t</Tr>\n\t</tfoot>\n);\n","import React from 'react';\nimport { Td, Tr } from '../../styles/table';\n\nexport const HeaderRow = () => (\n\t<thead>\n\t\t<Tr>\n\t\t\t<td colSpan={5}></td>\n\t\t\t<Td>Total</Td>\n\t\t\t<Td>Points</Td>\n\t\t</Tr>\n\t</thead>\n);\n","import React, { useCallback } from 'react';\nimport styled from 'styled-components';\nimport theme from 'styled-theming';\nimport { Category } from '../../Category';\nimport { darkColors } from '../../styles/colors';\nimport { Td } from '../../styles/table';\nimport { WriteValue, Value } from '../Game/state/GameState';\n\ninterface CellProps {\n\tcategory: Category;\n\tvalue: Value;\n\tsuggestion?: Value;\n\tindex: number;\n\twriteValue?: WriteValue;\n}\n\nexport const Cell = ({\n\tcategory,\n\tvalue,\n\tindex,\n\tsuggestion,\n\twriteValue,\n}: CellProps) => {\n\tconst onClick = useCallback(() => {\n\t\tif (suggestion && writeValue) {\n\t\t\twriteValue(category, index, suggestion);\n\t\t}\n\t}, [writeValue, index, suggestion, category]);\n\n\treturn (\n\t\t<TdCell onClick={onClick} variant={suggestion ? 'suggestion' : 'default'}>\n\t\t\t{valueToString(value !== null ? value : suggestion)}\n\t\t</TdCell>\n\t);\n};\n\nfunction valueToString(value?: Value): string {\n\tif (value === undefined || value === null || value === 0) {\n\t\treturn '';\n\t} else if (value === 'X') {\n\t\treturn 'X';\n\t} else {\n\t\treturn value.toString();\n\t}\n}\n\nconst backgroundColor = theme('mode', {\n\tdark: darkColors.secondaryBackgroundColor,\n});\n\nconst color = theme.variants('mode', 'variant', {\n\tdefault: { dark: darkColors.color },\n\tsuggestion: { dark: darkColors.suggestion },\n});\n\nconst TdCell = styled(Td)`\n\tbackground-color: ${backgroundColor};\n\tcolor: ${color};\n\tuser-select: none;\n\tpadding: 0 4px;\n\theight: 2em;\n`;\n","import { Category } from '../../Category';\nimport { Roll, RowState, Value } from '../Game/state/GameState';\nimport { sumNumbers } from '../Game/state/gameUtils';\n\nexport function categoryPoints(category: Category, values: RowState): number {\n\tswitch (category) {\n\t\tcase Category.Balut:\n\t\t\treturn 2 * values.filter((x) => typeof x === 'number' && x !== 0).length;\n\t\tcase Category.Chance:\n\t\t\treturn sumValues(values) >= 100 ? 2 : 0;\n\t\tcase Category.FullHouse:\n\t\t\treturn values.filter((x) => typeof x === 'number').length === 4 ? 3 : 0;\n\t\tcase Category.Straight:\n\t\t\treturn values.filter((x) => typeof x === 'number').length === 4 ? 4 : 0;\n\t\tcase Category.Sixes:\n\t\t\treturn sumValues(values) >= 78 ? 2 : 0;\n\t\tcase Category.Fives:\n\t\t\treturn sumValues(values) >= 65 ? 2 : 0;\n\t\tcase Category.Fours:\n\t\t\treturn sumValues(values) >= 52 ? 2 : 0;\n\t}\n}\n\nexport function sumValues(values: RowState): number {\n\treturn values\n\t\t.filter((x) => typeof x === 'number')\n\t\t.map((x) => x as number)\n\t\t.reduce((acc, v) => acc + v, 0);\n}\n\nconst finalPointScoreThresholds = [300, 350, 400, 450, 500, 550, 600, 650];\nexport function extraPointScore(score: number): number {\n\tlet points = -2;\n\n\tfor (const threshold of finalPointScoreThresholds) {\n\t\tif (score < threshold) {\n\t\t\tbreak;\n\t\t}\n\t\tpoints++;\n\t}\n\treturn points;\n}\n\nexport function calculateSuggestion(category: Category, roll?: Roll): Value {\n\tif (!roll) {\n\t\treturn null;\n\t}\n\n\tswitch (category) {\n\t\tcase Category.Fours:\n\t\t\treturn sumNumbers(roll.filter((x) => x === 4));\n\t\tcase Category.Fives:\n\t\t\treturn sumNumbers(roll.filter((x) => x === 5));\n\t\tcase Category.Sixes:\n\t\t\treturn sumNumbers(roll.filter((x) => x === 6));\n\t\tcase Category.Straight:\n\t\t\treturn isStraight(roll) ? sumNumbers(roll) : 'X';\n\t\tcase Category.FullHouse:\n\t\t\treturn isFullHouse(roll) ? sumNumbers(roll) : 'X';\n\t\tcase Category.Chance:\n\t\t\treturn sumNumbers(roll);\n\t\tcase Category.Balut:\n\t\t\treturn roll.every((x) => x === roll[0]) ? sumNumbers(roll) + 20 : 'X';\n\t}\n}\n\nexport function isStraight(roll: Roll): boolean {\n\treturn (\n\t\troll.some((x) => x === 1 || x === 6) &&\n\t\t[2, 3, 4, 5].every((x) => roll.includes(x))\n\t);\n}\n\nexport function isFullHouse(roll: Roll): boolean {\n\tconst values = new Set(roll);\n\tif (values.size !== 2) {\n\t\treturn false;\n\t}\n\n\treturn Array.from(values).every((v) => {\n\t\tconst count = roll.filter((x) => x === v).length;\n\t\treturn count === 3 || count === 2;\n\t});\n}\n","import React, { useMemo } from 'react';\nimport { Category, categoryToString } from '../../Category';\nimport { Td, Th, Tr } from '../../styles/table';\nimport { Roll, RowState, WriteValue } from '../Game/state/GameState';\nimport { Cell } from './Cell';\nimport { calculateSuggestion, categoryPoints, sumValues } from './rules';\n\ninterface RowProps {\n\tcategory: Category;\n\tvalues: RowState;\n\troll?: Roll;\n\twriteValue?: WriteValue;\n}\n\nexport const Row = ({ category, values, roll, writeValue }: RowProps) => {\n\tconst title = useMemo(() => categoryToString(category), [category]);\n\tconst sum = sumValues(values);\n\tconst points = categoryPoints(category, values);\n\tconst suggestion = calculateSuggestion(category, roll);\n\tconst first = values.findIndex((x) => x === null);\n\n\treturn (\n\t\t<Tr>\n\t\t\t<Th>{title}</Th>\n\t\t\t{values.map((value, i) => (\n\t\t\t\t<Cell\n\t\t\t\t\tkey={i}\n\t\t\t\t\tindex={i}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tcategory={category}\n\t\t\t\t\tsuggestion={\n\t\t\t\t\t\tfirst === i ? (suggestion === 0 ? 'X' : suggestion) : undefined\n\t\t\t\t\t}\n\t\t\t\t\twriteValue={writeValue}\n\t\t\t\t/>\n\t\t\t))}\n\t\t\t<Td>{sum}</Td>\n\t\t\t<Td>{points}</Td>\n\t\t</Tr>\n\t);\n};\n","import React from 'react';\nimport { Category } from '../../Category';\nimport { Table } from '../../styles/table';\nimport { enumValues } from '../../utils/enums';\nimport { BalutValues, Roll, WriteValue } from '../Game/state/GameState';\nimport { sumNumbers } from '../Game/state/gameUtils';\nimport { FinalScore } from './FinalScore';\nimport { FooterRow } from './FooterRow';\nimport { HeaderRow } from './HeaderRow';\nimport { Row } from './Row';\nimport { categoryPoints, extraPointScore, sumValues } from './rules';\n\nconst categories = enumValues(Category);\n\ninterface BoardProps {\n\tvalues: BalutValues;\n\troll?: Roll;\n\twriteValue?: WriteValue;\n}\n\nexport const Board = ({ values, roll, writeValue }: BoardProps) => {\n\tconst total = sumNumbers(\n\t\tObject.keys(values).map((key) => sumValues(values[key])),\n\t);\n\tconst extraPoints = extraPointScore(total);\n\tconst totalPoints =\n\t\textraPoints +\n\t\tsumNumbers(\n\t\t\tenumValues(Category).map((key) => {\n\t\t\t\treturn categoryPoints(\n\t\t\t\t\tkey,\n\t\t\t\t\tvalues[(Category[key] as unknown) as number],\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Table>\n\t\t\t\t<HeaderRow />\n\t\t\t\t<tbody>\n\t\t\t\t\t{categories.map((x) => (\n\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\tkey={x}\n\t\t\t\t\t\t\tcategory={x}\n\t\t\t\t\t\t\tvalues={values[(Category[x] as unknown) as number]}\n\t\t\t\t\t\t\troll={roll}\n\t\t\t\t\t\t\twriteValue={writeValue}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t\t<FooterRow extraPoints={extraPoints} total={total} />\n\t\t\t</Table>\n\t\t\t<FinalScore points={totalPoints} />\n\t\t</>\n\t);\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Button } from '../../styles/elements';\n\ninterface BoardControlsProps {\n\tclearBoard?: () => void;\n}\n\nexport const BoardControls = ({ clearBoard }: BoardControlsProps) => (\n\t<Wrapper>\n\t\t<Button variant=\"primary\" onClick={clearBoard}>\n\t\t\tNew game\n\t\t</Button>\n\t</Wrapper>\n);\n\nconst Wrapper = styled.div`\n\tdisplay: flex;\n\tjustify-content: right;\n\tmargin: 0 -6px -6px;\n`;\n","import React, { useCallback } from 'react';\nimport {\n\tFaDiceFive,\n\tFaDiceFour,\n\tFaDiceOne,\n\tFaDiceSix,\n\tFaDiceThree,\n\tFaDiceTwo,\n} from 'react-icons/fa/index';\nimport { IconBaseProps } from 'react-icons/lib';\n\ninterface DiceProps {\n\tdice: number;\n\tlocked: boolean;\n\tindex: number;\n\ttoggleLock: (index: number) => void;\n}\n\nexport const Dice = ({ dice, locked, index, toggleLock }: DiceProps) => {\n\tconst onClick = useCallback(() => toggleLock(index), [toggleLock, index]);\n\tconst color = locked ? 'red' : 'white';\n\n\tswitch (dice) {\n\t\tcase 1:\n\t\t\treturn <FaDiceOne {...diceStyles} color={color} onClick={onClick} />;\n\t\tcase 2:\n\t\t\treturn <FaDiceTwo {...diceStyles} color={color} onClick={onClick} />;\n\t\tcase 3:\n\t\t\treturn <FaDiceThree {...diceStyles} color={color} onClick={onClick} />;\n\t\tcase 4:\n\t\t\treturn <FaDiceFour {...diceStyles} color={color} onClick={onClick} />;\n\t\tcase 5:\n\t\t\treturn <FaDiceFive {...diceStyles} color={color} onClick={onClick} />;\n\t\tcase 6:\n\t\t\treturn <FaDiceSix {...diceStyles} color={color} onClick={onClick} />;\n\t}\n\treturn null;\n};\n\nconst diceStyles: IconBaseProps = {\n\tsize: 60,\n};\n","import React from 'react';\nimport { resetLocked } from './gameUtils';\nimport { Category } from '../../../Category';\nimport { enumStrings } from '../../../utils/enums';\n\nexport interface GameState {\n\troll?: Roll;\n\tlocked: RollLock;\n\trollNumber: number;\n\tname?: string;\n\tvalues: BalutValues;\n}\n\nexport interface GameAction {\n\treduce(state: GameState): GameState;\n}\n\nexport function gameReducer(state: GameState, action: GameAction): GameState {\n\tconst newState = action.reduce(state);\n\tlocalStorage.setItem('state', JSON.stringify(newState));\n\n\treturn newState;\n}\n\nexport const GameContext = React.createContext<{\n\tstate: GameState;\n\tdispatch: React.Dispatch<GameAction>;\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n}>({} as any);\n\nexport function initialGameState(): GameState {\n\tconst stored = localStorage.getItem('state');\n\n\tif (stored !== null) {\n\t\ttry {\n\t\t\treturn JSON.parse(stored) as GameState;\n\t\t} catch {}\n\t}\n\n\treturn {\n\t\trollNumber: 0,\n\t\tlocked: resetLocked(),\n\t\tvalues: initBalutValues(),\n\t};\n}\n\nexport function initBalutValues(): BalutValues {\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\treturn enumStrings(Category).reduce((acc: any, key) => {\n\t\tacc[key] = [null, null, null, null];\n\n\t\treturn acc;\n\t}, {});\n}\n\nexport type Roll = [number, number, number, number, number];\nexport type RollLock = [boolean, boolean, boolean, boolean, boolean];\n\nexport type BalutValues = { [key: string]: RowState };\n// Type to represent a entry on the Balut board.\n// 'null' = cell unused\n// 'X' = cell scratched\n// else the value entered\nexport type Value = number | 'X' | null;\nexport type RowState = [Value, Value, Value, Value];\n\nexport type WriteValue = (\n\tcategory: Category,\n\tindex: number,\n\tvalue: Value,\n) => void;\n","import {\n\tGameAction,\n\tGameState,\n\tinitBalutValues,\n} from '../GameState';\n\nexport class ClearBoard implements GameAction {\n\treduce(state: GameState): GameState {\n\t\tlocalStorage.removeItem('state');\n\n\t\treturn {\n\t\t\t...state,\n\t\t\tvalues: initBalutValues(),\n\t\t};\n\t}\n}\n","import { GameAction, GameState } from '../GameState';\nimport { resetLocked } from '../gameUtils';\n\nexport class ResetRollAction implements GameAction {\n\treduce(state: GameState): GameState {\n\t\treturn {\n\t\t\t...state,\n\t\t\tlocked: resetLocked(),\n\t\t\troll: undefined,\n\t\t\trollNumber: 0,\n\t\t};\n\t}\n}\n","import { GameAction, GameState } from '../GameState';\nimport { doRoll } from '../gameUtils';\n\nexport class RollAction implements GameAction {\n\treduce(state: GameState): GameState {\n\t\treturn {\n\t\t\t...state,\n\t\t\troll: doRoll(state.locked, state.roll),\n\t\t\trollNumber: state.rollNumber + 1,\n\t\t};\n\t}\n}\n","import { Category } from '../../../../Category';\nimport {\n\tValue,\n\tGameState,\n\tBalutValues,\n\tGameAction,\n} from '../GameState';\n\nexport class StoreValue implements GameAction {\n\tpublic category: Category;\n\tpublic index: number;\n\tpublic value: Value;\n\n\tconstructor(category: Category, index: number, value: Value) {\n\t\tthis.category = category;\n\t\tthis.index = index;\n\t\tthis.value = value;\n\t}\n\n\treduce(state: GameState): GameState {\n\t\tconst values: BalutValues = {};\n\t\tObject.assign(values, state.values);\n\t\tvalues[Category[this.category]][this.index] = this.value;\n\n\t\treturn { ...state, values };\n\t}\n}\n","import { GameAction, GameState, RollLock } from '../GameState';\n\nexport class ToggleDiceAction implements GameAction {\n\tindex: number;\n\n\tconstructor(index: number) {\n\t\tthis.index = index;\n\t}\n\n\treduce(state: GameState): GameState {\n\t\treturn {\n\t\t\t...state,\n\t\t\tlocked: state.locked.map((b, i) =>\n\t\t\t\tthis.index === i ? !b : b,\n\t\t\t) as RollLock,\n\t\t};\n\t}\n}\n","import React, { useCallback, useEffect, useReducer, useState } from 'react';\nimport styled from 'styled-components';\nimport { Category } from '../../Category';\nimport { Button } from '../../styles/elements';\nimport { Board } from '../Board/Board';\nimport { BoardControls } from '../Board/BoardControls';\nimport { Dice } from './Dice';\nimport { ClearBoard } from './state/actions/ClearBoard';\nimport { ResetRollAction } from './state/actions/ResetRollAction';\nimport { RollAction } from './state/actions/RollAction';\nimport { StoreValue } from './state/actions/StoreValue';\nimport { ToggleDiceAction } from './state/actions/ToggleDiceAction';\nimport {\n\tgameReducer,\n\tinitialGameState,\n\tValue,\n\tBalutValues,\n} from './state/GameState';\nimport { doRoll } from './state/gameUtils';\n\ninterface GameProps {\n\tonTurnFinished?: (values: BalutValues) => void;\n}\n\nexport const Game = ({ onTurnFinished }: GameProps) => {\n\tconst [state, dispatch] = useReducer(gameReducer, initialGameState());\n\tconst [roll, setRoll] = useState(state.roll);\n\tuseEffect(() => setRoll(state.roll), [state.roll]);\n\n\tconst executeRoll = useCallback(() => {\n\t\tconst interval = setInterval(() => {\n\t\t\tsetRoll(doRoll(state.locked, state.roll));\n\t\t}, 50);\n\n\t\tsetTimeout(() => {\n\t\t\tclearInterval(interval);\n\t\t\tdispatch(new RollAction());\n\t\t}, 1000);\n\t}, [dispatch, state]);\n\tconst toggleLock = useCallback(\n\t\t(index: number) => dispatch(new ToggleDiceAction(index)),\n\t\t[dispatch],\n\t);\n\tconst newRoll = useCallback(() => {\n\t\tdispatch(new ResetRollAction());\n\t}, [dispatch]);\n\tconst writeValue = useCallback(\n\t\t(category: Category, index: number, value: Value) => {\n\t\t\tdispatch(new StoreValue(category, index, value));\n\t\t\tnewRoll();\n\t\t\tif (onTurnFinished) {\n\t\t\t\tonTurnFinished(state.values);\n\t\t\t}\n\t\t},\n\t\t[dispatch, newRoll, state, onTurnFinished],\n\t);\n\tconst clearBoard = useCallback(() => {\n\t\tdispatch(new ClearBoard());\n\t\tdispatch(new ResetRollAction());\n\t}, [dispatch]);\n\n\treturn (\n\t\t<Container>\n\t\t\t<Board roll={state.roll} values={state.values} writeValue={writeValue} />\n\t\t\t<h3>\n\t\t\t\t{state.rollNumber === 0\n\t\t\t\t\t? 'Roll your dice!'\n\t\t\t\t\t: `Roll #${state.rollNumber} of 3`}\n\t\t\t</h3>\n\t\t\t<DiceContainer>\n\t\t\t\t{roll?.map((x, i) => (\n\t\t\t\t\t<Dice\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tdice={x}\n\t\t\t\t\t\tindex={i}\n\t\t\t\t\t\ttoggleLock={toggleLock}\n\t\t\t\t\t\tlocked={state.locked[i]}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</DiceContainer>\n\n\t\t\t<ButtonContainer>\n\t\t\t\t<Button\n\t\t\t\t\tvariant={state.rollNumber === 3 ? 'disabled' : 'primary'}\n\t\t\t\t\tonClick={executeRoll}\n\t\t\t\t\tdisabled={state.rollNumber === 3}\n\t\t\t\t>\n\t\t\t\t\tRoll\n\t\t\t\t</Button>\n\t\t\t</ButtonContainer>\n\n\t\t\t<BoardControls clearBoard={clearBoard} />\n\t\t</Container>\n\t);\n};\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n`;\n\nconst DiceContainer = styled.div`\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n`;\n\nconst ButtonContainer = styled.div`\n\tdisplay: flex;\n\tmargin: 6px -6px;\n`;\n","import { HubConnection } from '@microsoft/signalr';\nimport {\n\tBalutValues,\n\tinitBalutValues,\n} from '../components/Game/state/GameState';\nimport { Action, AppState } from './AppState';\n\nexport class SetConnectionAction implements Action {\n\tconnection: HubConnection;\n\n\tconstructor(connection: HubConnection) {\n\t\tthis.connection = connection;\n\t}\n\n\treduce(state: AppState): AppState {\n\t\treturn {\n\t\t\t...state,\n\t\t\tconnection: this.connection,\n\t\t};\n\t}\n}\n\nexport class SetSessionAction implements Action {\n\tsession: string;\n\tconstructor(session: string) {\n\t\tthis.session = session;\n\t}\n\n\treduce(state: AppState): AppState {\n\t\treturn {\n\t\t\t...state,\n\t\t\tsession: this.session,\n\t\t};\n\t}\n}\n\nexport class SetNameAction implements Action {\n\tname: string;\n\tconstructor(name: string) {\n\t\tthis.name = name;\n\t}\n\n\treduce(state: AppState): AppState {\n\t\treturn {\n\t\t\t...state,\n\t\t\tname: this.name,\n\t\t};\n\t}\n}\n\nexport class UpdatePlayerStateAction implements Action {\n\tvalues: BalutValues;\n\tname: string;\n\tconstructor(name: string, values: BalutValues) {\n\t\tthis.name = name;\n\t\tthis.values = values;\n\t}\n\n\treduce(state: AppState): AppState {\n\t\tconsole.log(`Updating player state for {this.name}`);\n\t\treturn {\n\t\t\t...state,\n\t\t\tplayers: state.players.map((player) => {\n\t\t\t\treturn player.name === this.name\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...player,\n\t\t\t\t\t\t\tvalues: this.values,\n\t\t\t\t\t  }\n\t\t\t\t\t: player;\n\t\t\t}),\n\t\t};\n\t}\n}\n\nexport class AddPlayerAction implements Action {\n\tname: string;\n\tconstructor(name: string) {\n\t\tthis.name = name;\n\t}\n\n\treduce(state: AppState): AppState {\n\t\treturn {\n\t\t\t...state,\n\t\t\tplayers: state.players\n\t\t\t\t.filter((p) => p.name !== this.name)\n\t\t\t\t.concat({ name: this.name, values: initBalutValues() }),\n\t\t};\n\t}\n}\n","import { HubConnection } from '@microsoft/signalr';\nimport React, { useCallback, useState, useEffect } from 'react';\nimport { Tab, TabList, TabPanel, Tabs } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\nimport { PlayerState, Action } from '../state/AppState';\nimport { Board } from './Board/Board';\nimport { Game } from './Game/Game';\nimport { UpdatePlayerStateAction } from '../state/AppActions';\n\ninterface MultiplayerGameProps {\n\tname: string;\n\tplayers: PlayerState[];\n\tconnection: HubConnection;\n\tsession: string;\n\tdispatch: React.Dispatch<Action>;\n}\n\nexport const MultiplayerGame = ({\n\tname,\n\tplayers,\n\tconnection,\n\tsession,\n\tdispatch,\n}: MultiplayerGameProps) => {\n\tconst [index, setIndex] = useState(0);\n\tconst onSelect = useCallback(\n\t\t(index) => {\n\t\t\tsetIndex(index);\n\t\t},\n\t\t[setIndex],\n\t);\n\n\tconst onTurnFinished = useCallback(\n\t\t(values) => {\n\t\t\tconnection.invoke('sendState', session, name, values);\n\t\t},\n\t\t[connection, session, name],\n\t);\n\tuseEffect(() => {\n\t\tconnection.on('newState', (name, values) => {\n\t\t\tdispatch(new UpdatePlayerStateAction(name, values));\n\t\t});\n\t}, [connection, dispatch]);\n\n\treturn (\n\t\t<div>\n\t\t\t<Tabs selectedIndex={index} onSelect={onSelect}>\n\t\t\t\t<TabList>\n\t\t\t\t\t<Tab>Me</Tab>\n\t\t\t\t\t{players.map((player) => (\n\t\t\t\t\t\t<Tab key={player.name}>{player.name}</Tab>\n\t\t\t\t\t))}\n\t\t\t\t</TabList>\n\n\t\t\t\t<TabPanel>\n\t\t\t\t\t<Game onTurnFinished={onTurnFinished} />\n\t\t\t\t</TabPanel>\n\t\t\t\t{players.map((player) => (\n\t\t\t\t\t<TabPanel key={player.name}>\n\t\t\t\t\t\t<Board values={player.values} />\n\t\t\t\t\t</TabPanel>\n\t\t\t\t))}\n\t\t\t</Tabs>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { Li, Ul } from '../styles/elements';\nimport { navColor } from '../styles/colors';\n\ninterface NavigationProps {\n\tshouldShowMultiplayer: boolean;\n\tshowMultiplayer: () => void;\n}\n\nexport const Navigation = ({\n\tshouldShowMultiplayer,\n\tshowMultiplayer,\n}: NavigationProps) => (\n\t<Nav>\n\t\t<NavUl>\n\t\t\t<NavLi>\n\t\t\t\t<Link to=\"/\">Game</Link>\n\t\t\t</NavLi>\n\t\t\t<NavLi>\n\t\t\t\t<Link to=\"/rules\">Rules</Link>\n\t\t\t</NavLi>\n\t\t\t{shouldShowMultiplayer && (\n\t\t\t\t<NavLi>\n\t\t\t\t\t<a onClick={showMultiplayer}>Multiplayer</a>\n\t\t\t\t</NavLi>\n\t\t\t)}\n\t\t</NavUl>\n\t</Nav>\n);\n\nconst Nav = styled.nav`\n\ta {\n\t\tcolor: ${navColor};\n\t\ttext-decoration: none;\n\t\tfont-size: 1.2em;\n\t\tmargin: 0 8px;\n\t\tcursor: pointer;\n\t}\n`;\n\nconst NavUl = styled(Ul)`\n\tdisplay: flex;\n\tflex-direction: row;\n`;\n\nconst NavLi = styled(Li)``;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Category, categoryToString } from '../Category';\nimport { Li, Ul } from '../styles/elements';\n\nconst points = [\n\t[Category.Fours, '52 or more', 2],\n\t[Category.Fives, '65 or more', 2],\n\t[Category.Sixes, '78 or more', 2],\n\t[Category.Straight, 'All straights', 4],\n\t[Category.FullHouse, 'All full house', 3],\n\t[Category.Chance, '100 or more', 2],\n\t[Category.Balut, 'Each balut', 2],\n];\n\nconst extraPoints = [\n\t[0, 299, -2],\n\t[300, 349, -1],\n\t[350, 399, 0],\n\t[400, 449, 1],\n\t[450, 499, 2],\n\t[500, 549, 3],\n\t[549, 599, 4],\n\t[600, 649, 5],\n\t[650, 'or above', 6],\n];\n\nexport const Rules = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Wrapper>\n\t\t\t\t<h3>How to calculate points</h3>\n\t\t\t\t<Ul>\n\t\t\t\t\t{points.map(([category, description, points]) => (\n\t\t\t\t\t\t<Li key={category}>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{categoryToString(category as Category)} - {description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<strong>{points} points</strong>\n\t\t\t\t\t\t</Li>\n\t\t\t\t\t))}\n\t\t\t\t</Ul>\n\t\t\t\t<h4>Extra points from total score</h4>\n\t\t\t\t<Ul>\n\t\t\t\t\t{extraPoints.map(([lower, higher, points]) => (\n\t\t\t\t\t\t<Li key={points}>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{lower} - {higher}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<strong>{points} points</strong>\n\t\t\t\t\t\t</Li>\n\t\t\t\t\t))}\n\t\t\t\t</Ul>\n\t\t\t</Wrapper>\n\t\t</Container>\n\t);\n};\n\nconst Container = styled.div`\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n`;\n\nconst Wrapper = styled.div`\n\twidth: 100%;\n\tmax-width: 350px;\n`;\n","import React, { useCallback } from 'react';\nimport styled from 'styled-components';\n\ninterface ModalProps {\n\tvisible: boolean;\n\tdismiss?: () => void;\n\tchildren?: JSX.Element;\n}\n\nexport const Modal = ({ children, visible, dismiss }: ModalProps) => {\n\tconst dismissClick = useCallback(() => {\n\t\tif (dismiss) {\n\t\t\tdismiss();\n\t\t}\n\t}, [dismiss]);\n\n\tconst clickCapture = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t\te.stopPropagation();\n\t\t},\n\t\t[],\n\t);\n\n\tif (!visible) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Container onClick={dismissClick}>\n\t\t\t<VerticalCenter>\n\t\t\t\t<ContentContainer onClick={clickCapture}>{children}</ContentContainer>\n\t\t\t</VerticalCenter>\n\t\t</Container>\n\t);\n};\n\nconst Container = styled.div`\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: rgba(0, 0, 0, 0.7);\n`;\n\nconst ContentContainer = styled.div`\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding: 16px;\n\tbackground: #666;\n\tborder-radius: 6px;\n\tmax-width: 50%;\n`;\n\nconst VerticalCenter = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\talign-items: center;\n\theight: 100%;\n\twidth: 100%;\n`;\n","import { HubConnection } from '@microsoft/signalr';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { url } from '../App';\nimport { initConnection } from '../connection';\nimport {\n\tAddPlayerAction,\n\tSetConnectionAction,\n\tSetSessionAction,\n\tSetNameAction,\n} from '../state/AppActions';\nimport { Action } from '../state/AppState';\nimport { Button } from '../styles/elements';\nimport { Modal } from './Modal';\n\ninterface StartMultiplayerModalProps {\n\tvisible: boolean;\n\tname?: string;\n\tdismiss: () => void;\n\tdispatch: React.Dispatch<Action>;\n\tconnection?: HubConnection;\n}\n\nexport const StartMultiplayerModal = ({\n\tname,\n\tvisible,\n\tdismiss,\n\tdispatch,\n\tconnection,\n}: StartMultiplayerModalProps) => {\n\tconst [failed, setFailed] = useState(false);\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst sessionRef = useRef<HTMLInputElement>(null);\n\n\tuseEffect(() => {\n\t\tinitConnection(url)\n\t\t\t.then((connection) => {\n\t\t\t\tdispatch(new SetConnectionAction(connection));\n\t\t\t})\n\t\t\t.catch(() => setFailed(true));\n\t}, [dispatch, setFailed]);\n\n\tuseEffect(() => {\n\t\tif (connection) {\n\t\t\tconnection.on('joinedSession', (session, newPlayer) => {\n\t\t\t\tconsole.log(`${newPlayer} joined ${session}`);\n\t\t\t\tdispatch(new AddPlayerAction(newPlayer));\n\n\t\t\t\tconnection.invoke('sendWelcome', session, name);\n\t\t\t});\n\t\t\tconnection.on('welcomeFrom', (otherPlayer) => {\n\t\t\t\tconsole.log(`${otherPlayer} says welcome`);\n\t\t\t\tdispatch(new AddPlayerAction(otherPlayer));\n\t\t\t});\n\t\t}\n\t\treturn () => {\n\t\t\tconnection?.off('joinedSession');\n\t\t\tconnection?.off('welcomeFrom');\n\t\t};\n\t}, [connection, name, dispatch]);\n\n\t// Start game\n\tconst startGame = useCallback(() => {\n\t\tif (connection) {\n\t\t\tconnection.on('createdSession', (session) => {\n\t\t\t\tdispatch(new SetSessionAction(session));\n\t\t\t\tdismiss();\n\t\t\t});\n\t\t\tconnection.invoke('createGame');\n\t\t\tdispatch(new SetNameAction(nameRef.current?.value ?? ''));\n\t\t}\n\t}, [connection, dispatch, dismiss]);\n\tconst startGameSubmit = useCallback(\n\t\t(e: React.FormEvent<HTMLFormElement>) => {\n\t\t\te.preventDefault();\n\t\t\tstartGame();\n\t\t},\n\t\t[startGame],\n\t);\n\n\t// Join game\n\tconst joinGame = useCallback(() => {\n\t\tif (connection) {\n\t\t\tconst session = sessionRef.current?.value;\n\t\t\tconst name = nameRef.current?.value ?? '';\n\t\t\tconnection.invoke('join', session, name);\n\t\t\tdispatch(new SetNameAction(name));\n\t\t\tdismiss();\n\t\t}\n\t}, [connection, sessionRef, nameRef, dismiss, dispatch]);\n\tconst joinGameSubmit = useCallback(\n\t\t(e: React.FormEvent<HTMLFormElement>) => {\n\t\t\te.preventDefault();\n\t\t\tjoinGame();\n\t\t},\n\t\t[joinGame],\n\t);\n\n\tif (failed) {\n\t\treturn (\n\t\t\t<Modal visible={visible} dismiss={dismiss}>\n\t\t\t\t<>Could not reach server. Try again later</>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Modal visible={visible} dismiss={dismiss}>\n\t\t\t<Container>\n\t\t\t\t<H3>Create new game</H3>\n\t\t\t\t<Form onSubmit={startGameSubmit}>\n\t\t\t\t\t<Input ref={nameRef} placeholder=\"Your name\" />\n\t\t\t\t\t<Button type=\"submit\">Start</Button>\n\t\t\t\t</Form>\n\t\t\t\t<Line />\n\t\t\t\t<H3>Join a game</H3>\n\t\t\t\t<Form onSubmit={joinGameSubmit}>\n\t\t\t\t\t<Input ref={sessionRef} placeholder=\"Enter code\" />\n\t\t\t\t\t<Button type=\"submit\">Join</Button>\n\t\t\t\t</Form>\n\t\t\t</Container>\n\t\t</Modal>\n\t);\n};\n\nconst Input = styled.input`\n\tborder-radius: 6px;\n\tpadding: 6px;\n\tmargin: 6px 0;\n`;\n\nconst Form = styled.form`\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-direction: column;\n`;\n\nconst H3 = styled.h3`\n\tpadding: 0;\n\tmargin: 0;\n\tmargin-bottom: 6px;\n\ttext-align: center;\n`;\n\nconst Line = styled.hr`\n\twidth: 100%;\n`;\n","import * as signalR from '@microsoft/signalr';\n\nexport function initConnection(url: string): Promise<signalR.HubConnection> {\n\tconst connection = new signalR.HubConnectionBuilder().withUrl(url).build();\n\n\tconnection.on('connected', () => {\n\t\tconsole.log('connected');\n\t});\n\n\treturn new Promise((resolve, reject) => {\n\t\tconnection\n\t\t\t.start()\n\t\t\t.then(() => {\n\t\t\t\tconsole.log('Connection started');\n\t\t\t\tresolve(connection);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error('Unable to connect to server');\n\t\t\t\treject(err);\n\t\t\t});\n\t});\n}\n","import { HubConnection } from '@microsoft/signalr';\nimport { BalutValues } from '../components/Game/state/GameState';\n\nexport interface AppState {\n\tname?: string;\n\tsession?: string;\n\tconnection?: HubConnection;\n\tplayers: PlayerState[];\n}\n\nexport interface PlayerState {\n\tname: string;\n\tvalues: BalutValues;\n}\n\nexport interface Action {\n\treduce(state: AppState): AppState;\n}\n\nexport function reducer(state: AppState, action: Action): AppState {\n\treturn action.reduce(state);\n}\n\nexport const initial: AppState = {\n\tplayers: [],\n};\n","import React, { useCallback, useReducer, useState } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport styled, {\n\tcreateGlobalStyle,\n\tcss,\n\tThemeProvider,\n} from 'styled-components';\nimport theme from 'styled-theming';\nimport { Game } from './components/Game/Game';\nimport { MultiplayerGame } from './components/MultiplayerGame';\nimport { Navigation } from './components/Navigation';\nimport { Rules } from './components/Rules';\nimport { StartMultiplayerModal } from './components/StartMultiplayerModal';\nimport { initial, reducer } from './state/AppState';\nimport { darkColors } from './styles/colors';\n\nexport const url = 'https://localhost:5001/play';\n\nfunction App() {\n\tconst [theme, setCurrentTheme] = useState<string>(\n\t\tlocalStorage.getItem('theme') ?? 'dark',\n\t);\n\tconst setTheme = useCallback(\n\t\t(theme: string) => {\n\t\t\tlocalStorage.setItem('theme', theme);\n\t\t\tsetCurrentTheme(theme);\n\t\t},\n\t\t[setCurrentTheme],\n\t);\n\tconst [showMPModal, setShowMPModal] = useState(false);\n\tconst [state, dispatch] = useReducer(reducer, initial);\n\n\treturn (\n\t\t<ThemeProvider theme={{ mode: theme }}>\n\t\t\t<GlobalStyle />\n\t\t\t<Router>\n\t\t\t\t<Main>\n\t\t\t\t\t<Header>\n\t\t\t\t\t\t<H1>Balut</H1>\n\t\t\t\t\t\t<Navigation\n\t\t\t\t\t\t\tshouldShowMultiplayer={!!state.connection}\n\t\t\t\t\t\t\tshowMultiplayer={() => setShowMPModal((x) => !x)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Header>\n\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route path=\"/rules\">\n\t\t\t\t\t\t\t\t<Rules />\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t\t\t\t{state.session && state.connection && state.name ? (\n\t\t\t\t\t\t\t\t\t<MultiplayerGame\n\t\t\t\t\t\t\t\t\t\tname={state.name}\n\t\t\t\t\t\t\t\t\t\tplayers={state.players}\n\t\t\t\t\t\t\t\t\t\tconnection={state.connection}\n\t\t\t\t\t\t\t\t\t\tsession={state.session}\n\t\t\t\t\t\t\t\t\t\tdispatch={dispatch}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Game />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</section>\n\t\t\t\t\t<StartMultiplayerModal\n\t\t\t\t\t\tname={state.name}\n\t\t\t\t\t\tvisible={showMPModal}\n\t\t\t\t\t\tdismiss={() => setShowMPModal(false)}\n\t\t\t\t\t\tdispatch={dispatch}\n\t\t\t\t\t\tconnection={state.connection}\n\t\t\t\t\t/>\n\t\t\t\t</Main>\n\t\t\t</Router>\n\t\t</ThemeProvider>\n\t);\n}\n\nexport default App;\n\nconst mainStyles = theme('mode', {\n\tdark: css`\n\t\tbackground-color: ${darkColors.backgroundColor};\n\t\tcolor: ${darkColors.color};\n\t`,\n});\n\nconst Main = styled.main`\n\t${mainStyles}\n\tpadding: 12px;\n`;\n\nconst GlobalStyle = createGlobalStyle`\n\tbody {\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tfont-family: Futura;\n\t\t${mainStyles}\n\t}\n`;\n\nconst Header = styled.header`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n`;\n\nconst H1 = styled.h1`\n\tmargin: 0;\n\tfont-size: 3em;\n\ttext-decoration: none !important;\n`;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}