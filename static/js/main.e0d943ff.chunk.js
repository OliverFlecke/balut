(this["webpackJsonpbalut-react"]=this["webpackJsonpbalut-react"]||[]).push([[0],{21:function(e,t,n){e.exports=n(28)},28:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(16),c=n.n(u),l=n(2),o=n(7),i=n(1),s=n(6),f=n.n(s),d="#CCC",m="#CCC",v="#000",b="#222",j="#09F",O=f()("mode",{dark:d});function h(){var e=Object(l.a)(["\n\tbackground-color: ",";\n\tcolor: ",";\n\tpadding: 10px;\n\tmargin: 6px;\n\tborder: none;\n\tborder-radius: 6px;\n\tfont-size: 1.2em;\n"]);return h=function(){return e},e}var g=f.a.variants("mode","variant",{disabled:{dark:"darkgray"},primary:{dark:"darkblue"}}),p=f.a.variants("mode","variant",{disabled:{dark:m},primary:{dark:m}}),k=i.d.button(h(),g,p),x=n(8),E=function(e){var t=e.dice,n=e.locked,u=e.index,c=e.toggleLock,l=Object(r.useCallback)((function(){return c(u)}),[c,u]),o=n?"red":"white";switch(t){case 1:return a.a.createElement(x.FaDiceOne,Object.assign({},y,{color:o,onClick:l}));case 2:return a.a.createElement(x.FaDiceTwo,Object.assign({},y,{color:o,onClick:l}));case 3:return a.a.createElement(x.FaDiceThree,Object.assign({},y,{color:o,onClick:l}));case 4:return a.a.createElement(x.FaDiceFour,Object.assign({},y,{color:o,onClick:l}));case 5:return a.a.createElement(x.FaDiceFive,Object.assign({},y,{color:o,onClick:l}));case 6:return a.a.createElement(x.FaDiceSix,Object.assign({},y,{color:o,onClick:l}))}return null},y={size:60},C=n(5),w=n(3),F=n(4),S=n(13);function N(e,t){return(null!==t&&void 0!==t?t:Object(S.a)(Array(5))).map((function(t,n){return e[n]?t:Math.floor(6*Math.random())+1}))}function I(){return Object(S.a)(Array(5)).map((function(){return!1}))}function B(e){return e.reduce((function(e,t){return e+t}),0)}var T=function(){function e(){Object(w.a)(this,e)}return Object(F.a)(e,[{key:"reduce",value:function(e){return Object(C.a)({},e,{roll:N(e.locked,e.roll),rollNumber:e.rollNumber+1})}}]),e}();function D(e,t){return t.reduce(e)}a.a.createContext({});var H,W={rollNumber:0,locked:I()},X=function(){function e(t){Object(w.a)(this,e),this.index=void 0,this.index=t}return Object(F.a)(e,[{key:"reduce",value:function(e){var t=this;return Object(C.a)({},e,{locked:e.locked.map((function(e,n){return t.index===n?!e:e}))})}}]),e}(),z=function(){function e(){Object(w.a)(this,e)}return Object(F.a)(e,[{key:"reduce",value:function(e){return Object(C.a)({},e,{locked:I(),roll:void 0,rollNumber:0})}}]),e}();function M(){var e=Object(l.a)(["\n\tborder: 1px solid ",";\n\tpadding: 4px;\n\ttext-align: center;\n\tmin-width: 20px;\n"]);return M=function(){return e},e}function R(){var e=Object(l.a)(["\n\ttext-align: left;\n\tborder: 1px solid ",";\n\tpadding: 4px;\n"]);return R=function(){return e},e}function J(){var e=Object(l.a)([""]);return J=function(){return e},e}function P(){var e=Object(l.a)(["\n\tborder-collapse: collapse;\n\twidth: 100%;\n\tmax-width: ",";\n"]);return P=function(){return e},e}!function(e){e[e.Fours=0]="Fours",e[e.Fives=1]="Fives",e[e.Sixes=2]="Sixes",e[e.Straight=3]="Straight",e[e.FullHouse=4]="FullHouse",e[e.Chance=5]="Chance",e[e.Balut=6]="Balut"}(H||(H={}));var V=i.d.table(P(),"760px"),A=i.d.tr(J()),L=i.d.th(R(),O),_=i.d.td(M(),O);function $(e){return Object.keys(e).filter((function(t){return"number"!==typeof e[t]})).map((function(e){return parseInt(e)}))}var q=function(){function e(t,n,r){Object(w.a)(this,e),this.category=void 0,this.index=void 0,this.value=void 0,this.category=t,this.index=n,this.value=r}return Object(F.a)(e,[{key:"reduce",value:function(e){var t={};return Object.assign(t,e.values),t[H[this.category]][this.index]=this.value,Object(C.a)({},e,{values:t})}}]),e}();var G=function(){var e=localStorage.getItem("state");if(null!==e)return JSON.parse(e);return{values:Q()}}(),K=a.a.createContext({state:G,dispatch:function(){}});function Q(){return(e=H,Object.keys(e).filter((function(t){return"number"===typeof e[t]}))).reduce((function(e,t){return e[t]=[null,null,null,null],e}),{});var e}var U=function(){function e(){Object(w.a)(this,e)}return Object(F.a)(e,[{key:"reduce",value:function(e){return localStorage.removeItem("state"),Object(C.a)({},e,{values:Q()})}}]),e}();function Y(){var e=Object(l.a)(["\n\tdisplay: flex;\n\tjustify-content: right;\n\tmargin: 0 -6px -6px;\n"]);return Y=function(){return e},e}var Z=function(){var e=Object(r.useContext)(K).dispatch,t=Object(r.useCallback)((function(){e(new U)}),[e]);return a.a.createElement(ee,null,a.a.createElement(k,{variant:"primary",onClick:t},"New game"))},ee=i.d.div(Y());function te(){var e=Object(l.a)(["\n\tfont-size: 1.4em;\n\tborder-bottom: 1px solid white;\n"]);return te=function(){return e},e}function ne(){var e=Object(l.a)(["\n\tdisplay: flex;\n\twidth: 100%;\n\tjustify-content: flex-end;\n\tmargin: 6px 0;\n\tmax-width: ",";\n"]);return ne=function(){return e},e}var re=function(e){var t=e.points;return a.a.createElement(ae,null,a.a.createElement(ue,null,a.a.createElement("span",null,"Final score: "),a.a.createElement("span",null,t)))},ae=i.d.div(ne(),"760px"),ue=i.d.div(te()),ce=function(e){var t=e.total,n=e.extraPoints;return a.a.createElement("tfoot",null,a.a.createElement(A,null,a.a.createElement("td",{colSpan:5}),a.a.createElement(_,null,t),a.a.createElement(_,null,n)))},le=function(){function e(t){Object(w.a)(this,e),this.name=void 0,this.name=t}return Object(F.a)(e,[{key:"reduce",value:function(e){return console.log("Changing name ".concat(this.name)),Object(C.a)({},e,{name:this.name})}}]),e}();function oe(){var e=Object(l.a)(["\n\twidth: 100%;\n\tflex-grow: 1;\n\tmargin: 0 6px;\n"]);return oe=function(){return e},e}function ie(){var e=Object(l.a)(["\n\tdisplay: flex;\n"]);return ie=function(){return e},e}function se(){var e=Object(l.a)(["\n\ttext-align: left;\n\tborder: none;\n"]);return se=function(){return e},e}var fe=function(){var e,t=Object(r.useContext)(K),n=t.state,u=t.dispatch,c=Object(r.useCallback)((function(e){var t;u(new le(null!==(t=e.currentTarget.innerText)&&void 0!==t?t:void 0))}),[u]);return a.a.createElement("thead",null,a.a.createElement(A,null,a.a.createElement(de,{colSpan:5},a.a.createElement(me,null,"Name:",a.a.createElement(ve,{contentEditable:!0,onBlur:c,dangerouslySetInnerHTML:{__html:null!==(e=n.name)&&void 0!==e?e:""}}))),a.a.createElement(_,null,"Total"),a.a.createElement(_,null,"Points")))},de=Object(i.d)(_)(se()),me=i.d.div(ie()),ve=i.d.span(oe());function be(){var e=Object(l.a)(["\n\tbackground-color: ",";\n\tcolor: ",";\n\tuser-select: none;\n"]);return be=function(){return e},e}var je=function(e){var t=e.category,n=e.value,u=e.index,c=e.suggestion,l=Object(r.useContext)(K).dispatch,o=Object(r.useCallback)((function(){c&&l(new q(t,u,c))}),[l,u,c,t]);return a.a.createElement(ge,{onClick:o,variant:c?"suggestion":"default"},function(e){return void 0===e||null===e||0===e?"":"X"===e?"X":e.toString()}(null!==n?n:c))};var Oe=f()("mode",{dark:b}),he=f.a.variants("mode","variant",{default:{dark:m},suggestion:{dark:j}}),ge=Object(i.d)(_)(be(),Oe,he),pe=n(20);function ke(e,t){switch(e){case H.Balut:return 2*t.filter((function(e){return"number"===typeof e&&0!==e})).length;case H.Chance:return xe(t)>=100?2:0;case H.FullHouse:return 4===t.filter((function(e){return"number"===typeof e})).length?3:0;case H.Straight:return 4===t.filter((function(e){return"number"===typeof e})).length?4:0;case H.Sixes:return xe(t)>=78?2:0;case H.Fives:return xe(t)>=65?2:0;case H.Fours:return xe(t)>=52?2:0}}function xe(e){return e.filter((function(e){return"number"===typeof e})).map((function(e){return e})).reduce((function(e,t){return e+t}),0)}var Ee=[300,350,400,450,500,550,600,650];function ye(e,t){if(!t)return null;switch(e){case H.Fours:return B(t.filter((function(e){return 4===e})));case H.Fives:return B(t.filter((function(e){return 5===e})));case H.Sixes:return B(t.filter((function(e){return 6===e})));case H.Straight:return function(e){return e.some((function(e){return 1===e||6===e}))&&[2,3,4,5].every((function(t){return e.includes(t)}))}(t)?B(t):"X";case H.FullHouse:return function(e){var t=new Set(e);if(2!==t.size)return!1;return Array.from(t).every((function(t){var n=e.filter((function(e){return e===t})).length;return 3===n||2===n}))}(t)?B(t):"X";case H.Chance:return B(t);case H.Balut:return t.every((function(e){return e===t[0]}))?B(t)+20:"X"}}var Ce=function(e){var t=e.category,n=e.values,u=e.roll,c=Object(r.useMemo)((function(){return function(e){if(e===H.FullHouse)return"Full house";return H[e]}(t)}),[t]),l=xe(n),o=ke(t,n),i=ye(t,u),s=!0;return a.a.createElement(A,null,a.a.createElement(L,null,c),n.map((function(e,n){var r=s&&null===e;return r&&(s=!1),a.a.createElement(je,{key:n,index:n,value:e,category:t,suggestion:r?0===i?"X":i:void 0})})),a.a.createElement(_,null,l),a.a.createElement(_,null,o))};var we=$(H),Fe=function(e){var t=e.roll,n=e.onValueWritten,u=Object(r.useCallback)(function(e){var t=e.onValueWritten;return function(e,n){var r=n.reduce(e);return localStorage.setItem("state",JSON.stringify(r)),n instanceof q&&t&&t(),r}}({onValueWritten:n}),[]),c=Object(r.useReducer)(u,G),l=Object(o.a)(c,2),i=l[0],s=l[1],f=Object.keys(i.values).map((function(e){return xe(i.values[e])})).reduce((function(e,t){return e+t})),d=function(e){var t,n=-2,r=Object(pe.a)(Ee);try{for(r.s();!(t=r.n()).done;){if(e<t.value)break;n++}}catch(a){r.e(a)}finally{r.f()}return n}(f),m=d+$(H).map((function(e){return ke(e,i.values[H[e]])})).reduce((function(e,t){return e+t}),0);return a.a.createElement(K.Provider,{value:{state:i,dispatch:s}},a.a.createElement(V,null,a.a.createElement(fe,null),a.a.createElement("tbody",null,we.map((function(e){return a.a.createElement(Ce,{key:e,category:e,values:i.values[H[e]],roll:t})}))),a.a.createElement(ce,{extraPoints:d,total:f})),a.a.createElement(re,{points:m}),a.a.createElement(Z,null))};function Se(){var e=Object(l.a)(["\n\tdisplay: flex;\n\tmargin: 6px -6px;\n"]);return Se=function(){return e},e}function Ne(){var e=Object(l.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n"]);return Ne=function(){return e},e}function Ie(){var e=Object(l.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n"]);return Ie=function(){return e},e}var Be=function(){var e=Object(r.useReducer)(D,W),t=Object(o.a)(e,2),n=t[0],u=t[1],c=Object(r.useState)(n.roll),l=Object(o.a)(c,2),i=l[0],s=l[1];Object(r.useEffect)((function(){return s(n.roll)}),[n.roll]);var f=Object(r.useCallback)((function(){var e=setInterval((function(){s(N(n.locked,n.roll))}),50);setTimeout((function(){clearInterval(e),u(new T)}),1e3)}),[u,n]),d=Object(r.useCallback)((function(e){return u(new X(e))}),[u]),m=Object(r.useCallback)((function(){u(new z)}),[u]),v=Object(r.useCallback)((function(){return m()}),[m]);return a.a.createElement(Te,null,a.a.createElement(Fe,{roll:n.roll,onValueWritten:v}),a.a.createElement("h3",null,0===n.rollNumber?"Roll your dice!":"Roll #".concat(n.rollNumber," of 3")),a.a.createElement(De,null,null===i||void 0===i?void 0:i.map((function(e,t){return a.a.createElement(E,{key:t,dice:e,index:t,toggleLock:d,locked:n.locked[t]})}))),a.a.createElement(He,null,a.a.createElement(k,{variant:3===n.rollNumber?"disabled":"primary",onClick:f,disabled:3===n.rollNumber},"Roll")))},Te=i.d.div(Ie()),De=i.d.div(Ne()),He=i.d.div(Se());function We(){var e=Object(l.a)(["\n\tmargin: 0;\n\tfont-size: 3em;\n"]);return We=function(){return e},e}function Xe(){var e=Object(l.a)(["\n\tbody {\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tfont-family: Futura;\n\t\t","\n\t}\n"]);return Xe=function(){return e},e}function ze(){var e=Object(l.a)(["\n\t","\n\tpadding: 12px;\n"]);return ze=function(){return e},e}function Me(){var e=Object(l.a)(["\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t"]);return Me=function(){return e},e}var Re=function(){var e,t=Object(r.useState)(null!==(e=localStorage.getItem("theme"))&&void 0!==e?e:"dark"),n=Object(o.a)(t,2),u=n[0];return n[1],a.a.createElement(i.a,{theme:{mode:u}},a.a.createElement(Ve,null),a.a.createElement(Pe,null,a.a.createElement("header",null,a.a.createElement(Ae,null,"Balut")),a.a.createElement("section",null,a.a.createElement(Be,null))))},Je=f()("mode",{dark:Object(i.c)(Me(),v,m)}),Pe=i.d.main(ze(),Je),Ve=Object(i.b)(Xe(),Je),Ae=i.d.h1(We());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.e0d943ff.chunk.js.map